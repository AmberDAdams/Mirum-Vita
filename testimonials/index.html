<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="description" content="Your One-Stop Well-Being Guru">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Testimonials</title>
    <script src="\file assets\jquery-3.4.0.min.js"></script>
    <link rel="stylesheet" href="\file assets\bootstrap.min.css">
    <script src="\file assets\bootstrap.min.js"></script>
    <link rel="stylesheet" href="/style.css">
    <link rel="preload" as="font" type="font/woff2" href="/file assets/charmonman-v5-latin-regular.woff2" crossorigin>
    <link rel="preload" as="font" type="font/woff2" href="/file assets/charmonman-v5-latin-700.woff2" crossorigin>
    <link rel="preload" as="font" type="font/woff2" href="/file assets/montserrat-v15-latin-regular.woff2" crossorigin>
    <link rel="preload" as="font" type="font/woff2" href="/file assets/montserrat-v15-latin-600.woff2" crossorigin>
    <link rel="preload" as="font" type="font/woff2" href="/file assets/montserrat-v15-latin-600italic.woff2" crossorigin>
    <link rel="apple-touch-icon" sizes="180x180" href="/favicons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicons/favicon-16x16.png">
    <link rel="shortcut icon" href="/favicons/favicon.ico">
    <link rel="manifest" href="/site.webmanifest">
  </head>
  <body>
  
    <div class="container-fluid px-0">
    
      <header class="row no-gutters">
        <div class="col-12 col-sm-4 col-md-4 col-lg-4 col-xl-3">
          <img src="/images/portrait.png"/>
        </div>
        <div class="col-2 col-sm-1 col-md-1 col-lg-2 col-xl-3 header-line"></div>
        <div class="col-8 col-sm-6 col-md-6 col-lg-4 col-xl-3 text-center">
          <h1>Mirum Vita</h1>
          <h3>by Meredith Wall, Ph. D</h3>
          <h5>Shaping Lives since 1996</h5>
        </div>
        <div class="col-2 col-sm-1 col-md-1 col-lg-2 col-xl-3 header-line"></div>
      </header>
      
      <nav class="navbar navbar-expand-lg">
        <div class="collapse navbar-collapse" id="navbarNavDropdown">
          <ul class="navbar-nav">
            <li class="nav-item leftmost-item">
              <a class="nav-link" href="/">Home</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/bookings">Bookings</a>
            </li>
            <span id="serviceDetails">
              <li class="nav-item">
                <a class="nav-link" href="/services">Services</a>
              </li>
              <li class="nav-item sub-nav-item">
                <a class="nav-link" href="/services/physical">Physical Therapy</a>
              </li>
              <li class="nav-item sub-nav-item">
                <a class="nav-link" href="/services/mental">Life Coaching</a>
              </li>
            </span>
            <li class="nav-item active">
              <a class="nav-link" href="/testimonials">Testimonials <span class="sr-only">(current)</span></a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/gallery">Photo Gallery</a>
            </li>
          </ul>
        </div>
        <a class="navbar-brand" href="/">
          <img src="/images/logo-navbar.png" alt="Mirum Vita Logo" height="70px"/>
        </a>
        <button class="navbar-toggler" type="button" onclick="togglerSwap()" data-toggle="collapse" data-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon">
            <img src="/images/expand-navbar.png" id="navToggleImg" alt="Expand Navbar" height="70px"/>
          </span>
        </button>
      </nav>
      
      <main>
      
        <h2>Testimonials</h2>
        <p id="testimonialsC2A">
          Have you had your own life-changing experience with Mirum Vita? If you would like to add your own testimonial, you can send us your story
          <a href="\testimonials\send" target="_blank">here</a> or leave a review on our
          <a href="https://www.facebook.com/mirumvita/" target="_blank">Facebook page</a>.
        </p>
        <ul id="testimonials"></ul>
        
        <div id="bookingPrompt">
          <h4>Great to see you again!</h4>
          <p>We see that you have visited our website a few times before. If you have yet
            to reach out to us regarding a booking, please contact us through the form
            <a href="\bookings">here</a> so that we can get you on a path to healing!
            We hope to speak to you soon!
          <p>
          <div class="customizationChoiceContainer">
            <a class="customizationChoice" id="closeBookingPrompt">Check Back Later</a>
            <a class="customizationChoice" id="removeBookingPrompt">Do Not Ask Again</a>
          <div>
        </div>
      </main>
      
      <footer class="row">
        <div class="col-12 col-md-4">
          <a href="\terms" target="_blank">Terms</a>&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp; <a href="\privacy" target="_blank">Privacy</a>
        </div>
        <div class="col-12 col-md-4">&#169; 2020 Mirum Vita</div>
        <div class="col-12 col-md-4">
          <a href="https://www.facebook.com/mirumvita/" target="_blank">Visit our Facebook</a> &nbsp;&nbsp;&nbsp;|
          &nbsp;&nbsp;&nbsp;<a href="https://www.instagram.com/mirumvita/" target="_blank">Visit our Instagram</a>
        </div>
      </footer>
      
      <div id="cookieConsent">
        <a href="\privacy" target="_blank">We would like to use cookies</a>
        to analyze your usage and customize your experience. Please choose one:<br>
        <div class="customizationChoiceContainer pt-2">
          <a class="customizationChoice" id="yesCookies">Cookies are OK</a>
          <a class="customizationChoice" id="noCookies">Please no Cookies</a>
        </div>
      </div>
      
    </div>
    
    <script>
    
      var visitLength = 1; //in hours
      var longCookieExpiry = 7305; //in days
        
      function togglerSwap() {
        var navToggleImg = document.getElementById("navToggleImg");
        if (navToggleImg.src.includes("expand")) {
          navToggleImg.src = "/images/collapse-navbar.png";
        } else {
          navToggleImg.src = "/images/expand-navbar.png";
        };
      };
      
      function setCookie(cname, cvalue, exdays) {
        var d = new Date();
        d.setTime(d.getTime() + (exdays * 24 * 60 * 60 * 1000));
        var expires = "expires="+d.toUTCString();
        document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/; SameSite=Lax";
      }

      function getCookie(cname) {
        var name = cname + "=";
        var ca = document.cookie.split(';');
        for(var i = 0; i < ca.length; i++) {
          var c = ca[i];
          while (c.charAt(0) == ' ') {
            c = c.substring(1);
          }
          if (c.indexOf(name) == 0) {
            return c.substring(name.length, c.length);
          }
        }
        return "";
      }

      function checkCookie(cname) {
        var user = getCookie(cname);
        return (user != "");
      }
      
      function showBookingPrompt () {
        if (!checkCookie("cookiesAllowed") ||
            getCookie("cookiesAllowed") == "false" ||
            checkCookie("closePromptForVisit") ||
            getCookie("bookingRequested") == "true" ||
            getCookie("allowBookingPrompt") == "false") {
          return false;
        } else {
          return true;
        };
      }

      $(document).ready(function(){
        
        if (showBookingPrompt()) {
          $("#bookingPrompt").show();
        };
          
        if (getCookie("cookiesAllowed") == "true" &&
            !checkCookie("currentlyVisiting")) {
          var numVisit = parseInt(getCookie("numberVisits")) + 1;
          setCookie("numberVisits", numVisit.toString(), longCookieExpiry);
          setCookie("currentlyVisiting", "true", (visitLength/24));
        };
        
        $.getJSON('testimonials.json', function(data) {
          let testimonialHTML = '';
          $.each(data, function(reviewer, details) {
            let firstname = reviewer.split(" ")[0];
            if (firstname.toLowerCase().charAt(firstname.length-1) == "s") {
              firstname = firstname + "'";
            } else {
              firstname = firstname + "'s";
            };
            testimonialHTML += '<li class="testimonial"><blockquote>';
            testimonialHTML += '&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;' + details.text;
            testimonialHTML += '</blockquote><h6>~ ' + reviewer + "</h6>";
            if (details.images != "") {
              testimonialHTML += '<div class="transformation-caption"><strong>' + firstname;
              testimonialHTML += ' Transformation</strong></div>';
              testimonialHTML += '<img class="transformation-img" src="' + details.images;
              testimonialHTML += '" alt="' + details.images.split(".")[0] + ': Images Failed to Load"></img>';
            };
            testimonialHTML += '</li>';
          });
          testimonialHTML += '<blockquote class="pt-4"><strong>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;';
          testimonialHTML += 'You can have similar changes in your life! Use the form ';
          testimonialHTML += '<a href="/bookings">here</a> to get started with us.</strong></blockquote>';
          $("#testimonials").html(testimonialHTML);
        });

        function buildSubnav(mediaQuery) {
          if (mediaQuery.matches) {
            isLargeNav = true;
            $(".sub-nav-item").hide();
          } else {
            isLargeNav = false;
            $(".sub-nav-item").show();
          }
        };

        var isLargeNav;
        var mediaQuery = window.matchMedia("(min-width: 992px)")
        buildSubnav(mediaQuery)
        mediaQuery.addEventListener("change", event => {
            buildSubnav(event);
        });
        
        $("#serviceDetails").hover(function(){
          if (isLargeNav) {
            $(".sub-nav-item").show(350);
          };
        },
        function(){
          if (isLargeNav) {
            $(".sub-nav-item").hide(350);
          };
        });
        
        if (!checkCookie("cookiesAllowed")) {
          setTimeout(function () {
            $("#cookieConsent").fadeIn(200);
          }, 1000);
        };
        
        $("#yesCookies").click(function() {
          $("#cookieConsent").fadeOut(200);
          setCookie("cookiesAllowed", "true", longCookieExpiry);
          setCookie("currentlyVisiting", "true", (visitLength/24));
          setCookie("numberVisits", "1", longCookieExpiry);
          setCookie("bookingRequested", "false", longCookieExpiry);
          setCookie("allowBookingPrompt", "true", longCookieExpiry);
        });
        
        $("#noCookies").click(function() {
          $("#cookieConsent").fadeOut(200);
          setCookie("cookiesAllowed", "false", longCookieExpiry);
        });
        
        $("#closeBookingPrompt").click(function() {
          $("bookingPrompt").hide();
          setCookie("closePromptForVisit", "true", (visitLength/24));
        });
        
        $("#removeBookingPrompt").click(function() {
          $("bookingPrompt").hide();
          setCookie("allowBookingPrompt", "false", longCookieExpiry);
        });

      });

    </script>
  </body>
</html>
