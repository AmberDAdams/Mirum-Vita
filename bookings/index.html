<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="description" content="Booking an Appointment at Mirum Vita">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bookings</title>
    <script src="\file assets\jquery-3.4.0.min.js"></script>
    <link rel="stylesheet" href="\file assets\bootstrap.min.css">
    <script src="\file assets\bootstrap.min.js"></script>
    <link rel="stylesheet" href="/style.css">
    <link rel="preload" as="font" type="font/woff2" href="/file assets/charmonman-v5-latin-regular.woff2" crossorigin>
    <link rel="preload" as="font" type="font/woff2" href="/file assets/charmonman-v5-latin-700.woff2" crossorigin>
    <link rel="preload" as="font" type="font/woff2" href="/file assets/montserrat-v15-latin-regular.woff2" crossorigin>
    <link rel="preload" as="font" type="font/woff2" href="/file assets/montserrat-v15-latin-600.woff2" crossorigin>
    <link rel="preload" as="font" type="font/woff2" href="/file assets/montserrat-v15-latin-600italic.woff2" crossorigin>
    <link rel="apple-touch-icon" sizes="180x180" href="/favicons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicons/favicon-16x16.png">
    <link rel="shortcut icon" href="/favicons/favicon.ico">
    <link rel="manifest" href="/site.webmanifest">
  </head>
  <body>
  
    <div class="container-fluid px-0">
    
      <header class="row no-gutters">
        <div class="col-12 col-sm-4 col-md-4 col-lg-4 col-xl-3">
          <img src="/images/portrait.png"/>
        </div>
        <div class="col-2 col-sm-1 col-md-1 col-lg-2 col-xl-3 header-line"></div>
        <div class="col-8 col-sm-6 col-md-6 col-lg-4 col-xl-3 text-center">
          <h1>Mirum Vita</h1>
          <h3>by Meredith Wall, Ph. D</h3>
          <h5>Shaping Lives since 1996</h5>
        </div>
        <div class="col-2 col-sm-1 col-md-1 col-lg-2 col-xl-3 header-line"></div>
      </header>
      
      <nav class="navbar navbar-expand-lg">
        <div class="collapse navbar-collapse" id="navbarNavDropdown">
          <ul class="navbar-nav">
            <li class="nav-item leftmost-item">
              <a class="nav-link" href="/">Home</a>
            </li>
            <li class="nav-item active">
              <a class="nav-link" href="/bookings">Bookings<span class="sr-only">(current)</span></a>
            </li>
            <span id="serviceDetails">
              <li class="nav-item">
                <a class="nav-link" href="/services">Services</a>
              </li>
              <li class="nav-item sub-nav-item">
                <a class="nav-link" href="/services/physical">Physical Therapy</a>
              </li>
              <li class="nav-item sub-nav-item">
                <a class="nav-link" href="/services/mental">Life Coaching</a>
              </li>
            </span>
            <li class="nav-item">
              <a class="nav-link" href="/testimonials">Testimonials</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/gallery">Photo Gallery</a>
            </li>
          </ul>
        </div>
        <a class="navbar-brand" href="/">
          <img src="/images/logo-navbar.png" alt="Mirum Vita Logo" height="70px"/>
        </a>
        <button class="navbar-toggler" type="button" onclick="togglerSwap()" data-toggle="collapse" data-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon">
            <img src="/images/expand-navbar.png" id="navToggleImg" alt="Expand Navbar" height="70px"/>
          </span>
        </button>
      </nav>
      
      <main role="main">
      
        <h2>Booking with Meredith</h2>
        <p>In order to provide the most personalized, most effective solutions for your particular situation, at Mirum Vita we begin with a phone consultation before scheduling appointments. Rates for appointments will then vary based on the services required. Please fill out the below form and Meredith will get in contact with you to learn more about your requirements and to schedule your appointment.</p>
      
        <form>
          <h3><strong>Booking Form</strong></h3>
          <h6 class="warning hidden" id="incomplete_form">Please Complete All Fields.</h6>
          <div class="row">
            <span class="form-element col-12 col-sm-5">
              <label for="name" class="large-label">Name</label>
              <input type="text" id="name" name="visitor_name" placeholder="John Smith" pattern=[A-Z\sa-z]{3,50} required>
            </span>
            <span class="form-element col-12 col-sm-3">
              <label for="dob" class="large-label">Date of Birth</label>
              <input type="date" id="dob" name="visitor_dob" required>
            </span>
            <span class="form-element col-12 col-sm-4">
              <label for="postcode" class="large-label">Postal Code</label>
              <input type="text" id="postcode" name="visitor_postcode" placeholder="WC1 1AA" required>
            </span>
          </div>
          <div class="row">
            <span class="form-element col-12 col-sm-8">
              <label for="email" class="large-label">Email Address</label>
              <input type="text" id="email" name="visitor_email" placeholder="example@example.com" required>
            </span>
            <span class="form-element col-12 col-sm-4">
              <label for="phone" class="large-label">Contact Number</label>
              <input type="text" id="phone" name="visitor_phone" placeholder="07777 777777" pattern=[0-9\s]{10,13} required>
            </span>
          </div>
          <div class="form-element" id="avail-cont">
            <h6 class="large-label">Availability</h6>
            <span class="avail-element row">
              <label class="avail-label col-12 col-md-2" for="mon">Mon</label>
              <select class="col-12 col-md-9" id="mon" name="mon_times">
                <option value="All Day">All Day</option>
                <option value="Mornings">Mornings</option>
                <option value="Afternoons">Afternoons</option>
                <option value="Evenings">Evenings</option>
                <option value="No Availability">No Availability</option>
              </select>
            </span>
            <span class="avail-element row">
              <label class="avail-label col-12 col-md-2" for="tues">Tue</label>
              <select class="col-12 col-md-9" id="tues" name="tues_times">
                <option value="All Day">All Day</option>
                <option value="Mornings">Mornings</option>
                <option value="Afternoons">Afternoons</option>
                <option value="Evenings">Evenings</option>
                <option value="No Availability">No Availability</option>
              </select>
            </span>
            <span class="avail-element row">
              <label class="avail-label col-12 col-md-2" for="wed">Wed</label>
              <select class="col-12 col-md-9" id="wed" name="wed_times">
                <option value="All Day">All Day</option>
                <option value="Mornings">Mornings</option>
                <option value="Afternoons">Afternoons</option>
                <option value="Evenings">Evenings</option>
                <option value="No Availability">No Availability</option>
              </select>
            </span>
            <span class="avail-element row">
              <label class="avail-label col-12 col-md-2" for="thurs">Thu</label>
              <select class="col-12 col-md-9" id="thurs" name="thurs_times">
                <option value="All Day">All Day</option>
                <option value="Mornings">Mornings</option>
                <option value="Afternoons">Afternoons</option>
                <option value="Evenings">Evenings</option>
                <option value="No Availability">No Availability</option>
              </select>
            </span>
            <span class="avail-element row">
              <label class="avail-label col-12 col-md-2" for="fri">Fri</label>
              <select class="col-12 col-md-9" id="fri" name="fri_times">
                <option value="All Day">All Day</option>
                <option value="Mornings">Mornings</option>
                <option value="Afternoons">Afternoons</option>
                <option value="Evenings">Evenings</option>
                <option value="No Availability">No Availability</option>
              </select>
            </span>
            <span class="avail-element row">
              <label class="avail-label col-12 col-md-2" for="sat">Sat</label>
              <select class="col-12 col-md-9" id="sat" name="sat_times">
                <option value="All Day">All Day</option>
                <option value="Mornings">Mornings</option>
                <option value="Afternoons">Afternoons</option>
                <option value="Evenings">Evenings</option>
                <option value="No Availability">No Availability</option>
              </select>
            </span>
            <span class="avail-element row">
              <label class="avail-label col-12 col-md-2" for="sun">Sun</label>
              <select class="col-12 col-md-9" id="sun" name="sun_times">
                <option value="All Day">All Day</option>
                <option value="Mornings">Mornings</option>
                <option value="Afternoons">Afternoons</option>
                <option value="Evenings">Evenings</option>
                <option value="No Availability">No Availability</option>
              </select>
            </span>
          </div>
          <div class="form-element">
            <label for="summary" class="large-label">Summary of Personal History and Problems Which I Can Help With</label>
            <textarea id="summary" name="personal_summary" placeholder="What can Meredith help you with?" required></textarea>
          </div>
          <button onclick="sendBookingRequest()" type="submit" name="submit" class="btn btn-info mt-3">
            Submit
          </button>
        </form>
      
      </main>
      
      <footer class="row">
        <div class="col-12 col-md-4">
          <a href="\terms" target="_blank">Terms</a>&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp; <a href="\privacy" target="_blank">Privacy</a>
        </div>
        <div class="col-12 col-md-4">&#169; 2020 Mirum Vita</div>
        <div class="col-12 col-md-4">
          <a href="https://www.facebook.com/mirumvita/" target="_blank">Visit our Facebook</a> &nbsp;&nbsp;&nbsp;|
          &nbsp;&nbsp;&nbsp;<a href="https://www.instagram.com/mirumvita/" target="_blank">Visit our Instagram</a>
        </div>
      </footer>
      
      <div id="cookieConsent">
        <a href="\privacy" target="_blank">We would like to use cookies</a>
        to analyze your usage and customize your experience. Please choose one:<br>
        <div class="customizationChoiceContainer pt-2">
          <a class="customizationChoice" id="yesCookies">Cookies are OK</a>
          <a class="customizationChoice" id="noCookies">Please no Cookies</a>
        </div>
      </div>
      
    </div>
    
    <script type="text/javascript"
        src="https://cdn.jsdelivr.net/npm/emailjs-com@2/dist/email.min.js">
    </script>
    
    <script>
    
      var visitLength = 1; //in hours
      var longCookieExpiry = 7305; //in days
        
      function togglerSwap() {
        var navToggleImg = document.getElementById("navToggleImg");
        if (navToggleImg.src.includes("expand")) {
          navToggleImg.src = "/images/collapse-navbar.png";
        } else {
          navToggleImg.src = "/images/expand-navbar.png";
        };
      };
      
      function setCookie(cname, cvalue, exdays) {
        var d = new Date();
        d.setTime(d.getTime() + (exdays * 24 * 60 * 60 * 1000));
        var expires = "expires="+d.toUTCString();
        document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/; SameSite=Lax";
      }

      function getCookie(cname) {
        var name = cname + "=";
        var ca = document.cookie.split(';');
        for(var i = 0; i < ca.length; i++) {
          var c = ca[i];
          while (c.charAt(0) == ' ') {
            c = c.substring(1);
          }
          if (c.indexOf(name) == 0) {
            return c.substring(name.length, c.length);
          }
        }
        return "";
      }

      function checkCookie(cname) {
        var user = getCookie(cname);
        return (user != "");
      }
      
      function filled(form_entries) {
        if (arguments.visitor_name == "" || arguments.visitor_db == "" ||
            arguments.visitor_postcode == "" || arguments.visitor_email == "" ||
            arguments.visitor_phone == "" || arguments.personal_summary == "") {
          console.log("invalid");
          return false;
        } else {
          console.log("valid");
          return true;
        };
      };
      
      function sendBookingRequest() {
        var arguments = {
          visitor_name: document.getElementById("name").value.trim(),
          visitor_dob: document.getElementById("dob").value,
          visitor_postcode: document.getElementById("postcode").value.trim(),
          visitor_email: document.getElementById("email").value.trim(),
          visitor_phone: document.getElementById("phone").value.trim(),
          mon_avail: document.getElementById("mon").value,
          tues_avail: document.getElementById("tues").value,
          wed_avail: document.getElementById("wed").value,
          thurs_avail: document.getElementById("thurs").value,
          fri_avail: document.getElementById("fri").value,
          sat_avail: document.getElementById("sat").value,
          sun_avail: document.getElementById("sun").value,
          personal_summary: document.getElementById("summary").value.trim()
        };
        
        if (!filled(arguments)) {
          document.getElementById("incomplete_form").className = "warning";
          return;
        };
        
        setCookie("bookingRequested", "true", 7300);
        
        emailjs.send('mirumvita_bookingform', 'template_oyu48pk', arguments, "user_5nJXJ9g3yY33uJLBBuheX")
          .then(function(response) {
             console.log('SUCCESS!', response.status, response.text);
          }, function(error) {
             console.log('FAILED...', error);
          });
        
        var thank_you = '<h3>Thank you!</h3><h6>Meredith will get in touch soon.</h6>'
        document.querySelector('form').innerHTML = thank_you;
        
      };
      
      emailjs.init("user_5nJXJ9g3yY33uJLBBuheX");
    
      $(document).ready(function(){
          
        if (getCookie("cookiesAllowed") == "true" &&
            !checkCookie("currentlyVisiting")) {
          var numVisit = parseInt(getCookie("numberVisits")) + 1;
          setCookie("numberVisits", numVisit.toString(), longCookieExpiry);
          setCookie("currentlyVisiting", "true", (visitLength/24));
        };

        function buildSubnav(mediaQuery) {
          if (mediaQuery.matches) {
            isLargeNav = true;
            $(".sub-nav-item").hide();
          } else {
            isLargeNav = false;
            $(".sub-nav-item").show();
          }
        };

        var isLargeNav;
        var mediaQuery = window.matchMedia("(min-width: 992px)")
        buildSubnav(mediaQuery)
        mediaQuery.addEventListener("change", event => {
            buildSubnav(event);
        });
        
        $("#serviceDetails").hover(function(){
          if (isLargeNav) {
            $(".sub-nav-item").show(350);
          };
        },
        function(){
          if (isLargeNav) {
            $(".sub-nav-item").hide(350);
          };
        });
        
        if (!checkCookie("cookiesAllowed")) {
          setTimeout(function () {
            $("#cookieConsent").fadeIn(200);
          }, 1000);
        };
        
        $("#yesCookies").click(function() {
          $("#cookieConsent").fadeOut(200);
          setCookie("cookiesAllowed", "true", longCookieExpiry);
          setCookie("currentlyVisiting", "true", (visitLength/24));
          setCookie("numberVisits", "1", longCookieExpiry);
          setCookie("bookingRequested", "false", longCookieExpiry);
          setCookie("allowBookingPrompt", "true", longCookieExpiry);
        });
        
        $("#noCookies").click(function() {
          $("#cookieConsent").fadeOut(200);
          setCookie("cookiesAllowed", "false", longCookieExpiry);
        });

      });

    </script>
  </body>
</html>
